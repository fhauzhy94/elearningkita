var quiz_edit={}
function quiz_edit_init(Y){M.core_scroll_manager.scroll_to_saved_pos(Y);Y.on('submit',function(e){M.core_scroll_manager.save_scroll_pos(Y,'id_existingcategory')},'#mform1');Y.on('submit',function(e){M.core_scroll_manager.save_scroll_pos(Y,e.target.get('firstChild'))},'.quizsavegradesform');var randomquestiondialog=Y.YUI2.util.Dom.get('randomquestiondialog');if(randomquestiondialog)Y.YUI2.util.Dom.get(document.body).appendChild(randomquestiondialog);quiz_edit.randomquestiondialog=new Y.YUI2.widget.Dialog('randomquestiondialog',{modal:true,width:'100%',iframe:true,zIndex:1e3,fixedcenter:true,visible:false,close:true,constraintoviewport:true,postmethod:'form'});quiz_edit.randomquestiondialog.render();var div=document.getElementById('randomquestiondialog');if(div)div.style.display='block';Y.YUI2.util.Event.addListener(quiz_edit_config.dialoglisteners,'click',function(e){var addrandombutton=Y.YUI2.util.Event.getTarget(e),addpagehidden=Y.YUI2.util.Dom.getElementsByClassName('addonpage_formelement','input',addrandombutton.form);document.getElementById('rform_qpage').value=addpagehidden[0].value;quiz_edit.randomquestiondialog.show();Y.YUI2.util.Event.stopEvent(e)});quiz_edit.randomquestiondialog.cfg.setProperty('keylisteners',[new Y.YUI2.util.KeyListener(document,{keys:[27]},function(types,args,obj){quiz_edit.randomquestiondialog.hide()})]);Y.YUI2.util.Event.addListener('id_cancel','click',function(e){quiz_edit.randomquestiondialog.hide();Y.YUI2.util.Event.preventDefault(e)});Y.YUI2.util.Event.addListener('id_existingcategory','click',quiz_yui_workaround);Y.YUI2.util.Event.addListener('id_newcategory','click',quiz_yui_workaround);quiz_edit.repaginatedialog=new Y.YUI2.widget.Dialog('repaginatedialog',{modal:true,width:'30em',iframe:true,zIndex:1e3,context:['repaginatecommand','tr','br',['beforeShow']],visible:false,close:true,constraintoviewport:true,postmethod:'form'});quiz_edit.repaginatedialog.render();quiz_edit.randomquestiondialog.render();var div=document.getElementById('repaginatedialog');if(div)div.style.display='block';Y.YUI2.util.Event.addListener('repaginatecommand','click',function(){quiz_edit.repaginatedialog.show()});Y.YUI2.widget.Overlay.windowResizeEvent.subscribe(function(){quiz_edit.repaginatedialog.cfg.setProperty('context',['repaginatecommand','tr','br',['beforeShow']])});quiz_edit.repaginatedialog.cfg.setProperty('keylisteners',[new Y.YUI2.util.KeyListener(document,{keys:[27]},function(types,args,obj){quiz_edit.repaginatedialog.hide()})]);var elementcauseinglayoutproblem=document.getElementById('_yuiResizeMonitor');if(elementcauseinglayoutproblem)elementcauseinglayoutproblem.style.left='0px'}
function quiz_yui_workaround(e){YUI().use('yui2-event',function(Y){var submitbutton=Y.YUI2.util.Event.getTarget(e),input=document.createElement('input');input.type='hidden';input.name=submitbutton.name;input.value=1;submitbutton.form.appendChild(input)})}
function quiz_settings_init(Y){var repaginatecheckbox=document.getElementById('id_repaginatenow');if(!repaginatecheckbox)return;var qppselect=document.getElementById('id_questionsperpage'),qppinitialvalue=qppselect.value;Y.YUI2.util.Event.addListener([qppselect,'id_shufflequestions'],'change',function(){setTimeout(function(){if(!repaginatecheckbox.disabled)repaginatecheckbox.checked=qppselect.value!=qppinitialvalue},50)})}